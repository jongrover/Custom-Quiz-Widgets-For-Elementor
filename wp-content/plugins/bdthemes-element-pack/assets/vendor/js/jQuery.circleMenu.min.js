!function(r,t,e,i){var l="circleMenu",n={depth:0,item_diameter:30,circle_radius:80,angle:{start:0,end:90},speed:500,delay:1e3,step_out:20,step_in:-20,trigger:"hover",transition_function:"ease"};function o(e,i,n){["-webkit-","-moz-","-o-","-ms-",""].forEach(function(t){e.css(t+i,n)})}function s(t,e){this._timeouts=[],this.element=r(t),this.options=r.extend({},n,e),this._defaults=n,this._name=l,this.init(),this.hook()}s.prototype.init=function(){var t,s=this,e={"bottom-left":[180,90],bottom:[135,45],right:[-45,45],left:[225,135],top:[225,315],"bottom-half":[180,0],"right-half":[-90,90],"left-half":[270,90],"top-half":[180,360],"top-left":[270,180],"top-right":[270,360],full:[-90,270-Math.floor(360/(s.element.children("li").length-1))],"bottom-right":[0,90]};s._state="closed",s.element.addClass(l+"-closed"),"string"==typeof s.options.direction&&(t=e[s.options.direction.toLowerCase()])&&(s.options.angle.start=t[0],s.options.angle.end=t[1]),s.menu_items=s.element.children("li:not(:first-child)"),s.initCss(),s.item_count=s.menu_items.length,s._step=(s.options.angle.end-s.options.angle.start)/(s.item_count-1),s.menu_items.each(function(t){var e=r(this),i=(s.options.angle.start+s._step*t)*(Math.PI/180),n=Math.round(s.options.circle_radius*Math.cos(i)),o=Math.round(s.options.circle_radius*Math.sin(i));e.data("plugin_"+l+"-pos-x",n),e.data("plugin_"+l+"-pos-y",o),e.on("click",function(){s.select(t+2)})}),["open","close","init","select"].forEach(function(t){var e;s.options[t]&&(e=s.options[t],s.element.on(l+"-"+t,function(){return e.apply(s,arguments)}),delete s.options[t])}),s.submenus=s.menu_items.children("ul"),s.submenus.circleMenu(r.extend({},s.options,{depth:s.options.depth+1})),s.trigger("init")},s.prototype.trigger=function(){var t,e,i=[];for(t=0,e=arguments.length;t<e;t++)i.push(arguments[t]);this.element.trigger(l+"-"+i.shift(),i)},s.prototype.hook=function(){var e=this;"hover"===e.options.trigger?e.element.on("mouseenter",function(t){e.open()}).on("mouseleave",function(t){e.close()}):"click"===e.options.trigger?e.element.children("li:first-child").on("click",function(t){return t.preventDefault(),"closed"===e._state||"closing"===e._state?e.open():e.close(!0),!1}):e.options.trigger},s.prototype.open=function(){var t,i=this,e=this.element;return i.clearTimeouts(),"open"===i._state||(e.addClass(l+"-open"),e.removeClass(l+"-closed"),(t=0<=i.options.step_out?i.menu_items:r(i.menu_items.get().reverse())).each(function(t){var e=r(this);i._timeouts.push(setTimeout(function(){e.css({left:e.data("plugin_"+l+"-pos-x")+"px",top:e.data("plugin_"+l+"-pos-y")+"px"}),o(e,"transform","scale(1)")},0+Math.abs(i.options.step_out)*t))}),i._timeouts.push(setTimeout(function(){"opening"===i._state&&i.trigger("open"),i._state="open"},0+Math.abs(i.options.step_out)*t.length)),i._state="opening"),i},s.prototype.close=function(t){var i=this,e=this.element,n=function(){var t;return i.submenus.circleMenu("close"),i.clearTimeouts(),"closed"===i._state||((t=0<=i.options.step_in?i.menu_items:r(i.menu_items.get().reverse())).each(function(t){var e=r(this);i._timeouts.push(setTimeout(function(){e.css({top:0,left:0}),o(e,"transform","scale(.5)")},0+Math.abs(i.options.step_in)*t))}),i._timeouts.push(setTimeout(function(){"closing"===i._state&&i.trigger("close"),i._state="closed"},0+Math.abs(i.options.step_in)*t.length)),e.removeClass(l+"-open"),e.addClass(l+"-closed"),i._state="closing"),i};return t?n():i._timeouts.push(setTimeout(n,i.options.delay)),this},s.prototype.select=function(t){var e,i,n=this;"open"!==n._state&&"opening"!==n._state||(n.clearTimeouts(),i=n.element.children("li:not(:nth-child("+t+"),:first-child)"),e=n.element.children("li:nth-child("+t+")"),n.trigger("select",e),o(e.add(i),"transition","all 500ms ease-out"),o(e,"transform","scale(2)"),o(i,"transform","scale(0)"),e.css("opacity","0"),i.css("opacity","0"),n.element.removeClass(l+"-open"),setTimeout(function(){n.initCss()},500))},s.prototype.clearTimeouts=function(){for(var t;t=this._timeouts.shift();)clearTimeout(t)},s.prototype.initCss=function(){var t,e=this;e._state="closed",e.element.removeClass(l+"-open"),e.element.css({"list-style":"none",margin:0,padding:0,width:e.options.item_diameter+"px"}),(t=e.element.children("li")).attr("style",""),t.css({display:"block",width:e.options.item_diameter+"px",height:e.options.item_diameter+"px","text-align":"center","line-height":e.options.item_diameter+"px",position:"absolute","z-index":1,opacity:""}),e.element.children("li:first-child").css({"z-index":1e3-e.options.depth}),e.menu_items.css({top:0,left:0}),o(t,"border-radius",e.options.item_diameter+"px"),o(e.menu_items,"transform","scale(.5)"),setTimeout(function(){o(t,"transition","all "+e.options.speed+"ms "+e.options.transition_function)},0)},r.fn[l]=function(i){return this.each(function(){var t=r.data(this,"plugin_"+l),e={init:function(){t.init()},open:function(){t.open()},close:function(){t.close(!0)}};"string"==typeof i&&t&&e[i]&&e[i](),t||r.data(this,"plugin_"+l,new s(this,i))})}}(jQuery,window,document);
/**
 * Create an audio version of your posts, with a selection of more than 235+ voices across more than 40 languages and variants.
 * Exclusively on Envato Market: https://1.envato.market/speaker
 *
 * @encoding        UTF-8
 * @version         3.1.0
 * @copyright       Copyright (C) 2018 - 2020 Merkulove ( https://merkulov.design/ ). All rights reserved.
 * @license         Envato License https://1.envato.market/KYbje
 * @contributors    Alexander Khmelnitskiy (info@alexander.khmelnitskiy.ua), Dmitry Merkulov (dmitry@merkulov.design)
 * @support         help@merkulov.design
 **/
!function(e){"use strict";e(document).ready((function(){let t=[],s=!1;e("#doaction").on("click",(function(a){if("speaker"!==e("#bulk-action-selector-top").val())return;if(a.preventDefault(),t=[],s=!0,e("#the-list .check-column input:checked").each((function(){t.push(this.value)})),!t.length)return;t=t.reverse();let n=t.pop();e("#post-"+n+" .mdp-speaker-gen").click(),e("#cb-select-"+n).click()})),e(document).on("click",".mdp-speaker-gen",(function(a){let n=window.mdpSpeaker,c=e(this),l=c.parent();if(a.preventDefault(),c.hasClass("is-busy"))return;l.find("a").addClass("is-busy").attr("disabled",!0),c.find("img").remove();let i=e(this).data("post-id"),o={action:"gspeak",nonce:n.nonce,post_id:i,stid:e(this).data("stid")};function p(e){console.error(e),e.message?alert("ERROR:\n "+e.message):e.responseText?alert("ERROR:\n "+e.responseText):alert("ERROR:\n "+e)}e.ajax({type:"POST",url:ajaxurl,data:o,success:function(a){if(a.success?(l.html('<a href="'+n.audio_url+"post-"+i+'.mp3" download="" class="mdp-speaker-download"></a>'),l.append('<a href="#" class="mdp-speaker-gen" data-post-id="'+i+'" style="display: none;"></a>')):p(a),t.length){let s=t.pop();e("#post-"+s+" .mdp-speaker-gen").click(),e("#cb-select-"+s).click()}else s&&(s=!1,alert("Generation of Audio Files is Complete."))},fail:function(s){if(l.html('<a href="#" class="mdp-speaker-error"></a>'),p(s),t.length){let s=t.pop();e("#post-"+s+" .mdp-speaker-gen").click(),e("#cb-select-"+s).click()}}})}))}))}(jQuery);
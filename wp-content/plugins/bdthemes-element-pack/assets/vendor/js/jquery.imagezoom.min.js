!function(p,c,e){p.ImageZoom=function(e,t){var g=this;function f(e){var t=parseInt(e);return t=isNaN(t)?0:t}g.$el=p(e),g.$el.data("imagezoom",g),g.init=function(e){g.options=p.extend({},p.ImageZoom.defaults,e),g.$viewer=p('<div class="zm-viewer '+g.options.zoomViewerClass+'"></div>').appendTo("body"),g.$handler=p('<div class="zm-handler'+g.options.zoomHandlerClass+'"></div>').appendTo("body"),g.isBigImageReady=-1,g.$largeImg=null,g.isActive=!1,g.$handlerArea=null,g.isWebkit=/chrome/.test(navigator.userAgent.toLowerCase())||/safari/.test(navigator.userAgent.toLowerCase()),g.evt={x:-1,y:-1},g.options.bigImageSrc=""==g.options.bigImageSrc?g.$el.attr("src"):g.options.bigImageSrc,(new Image).src=g.options.bigImageSrc,g.callIndex=p.ImageZoom._calltimes+1,g.animateTimer=null,p.ImageZoom._calltimes+=1,p(document).bind("mousemove.imagezoom"+g.callIndex,function(e){g.isActive&&g.moveHandler(e.pageX,e.pageY)}),g.$el.bind("mouseover.imagezoom",function(e){g.isActive=!0,g.showViewer(e)})},g.moveHandler=function(e,t){var i=g.$el.offset(),o=g.$el.outerWidth(!1),s=g.$el.outerHeight(!1);if(e>=i.left&&e<=i.left+o&&t>=i.top&&t<=i.top+s){if(i.left=i.left+f(g.$el.css("borderLeftWidth"))+f(g.$el.css("paddingLeft")),i.top=i.top+f(g.$el.css("borderTopWidth"))+f(g.$el.css("paddingTop")),o=g.$el.width(),s=g.$el.height(),e>=i.left&&e<=i.left+o&&t>=i.top&&t<=i.top+s&&(g.evt={x:e,y:t},"follow"==g.options.type&&g.$viewer.css({top:t-g.$viewer.outerHeight(!1)/2,left:e-g.$viewer.outerWidth(!1)/2}),1==g.isBigImageReady)){var n,a,r=t-i.top,l=e-i.left;if("inner"==g.options.type)n=-g.$largeImg.height()*r/s+r,a=-g.$largeImg.width()*l/o+l;else if("standard"==g.options.type){var h=l-g.$handlerArea.width()/2,d=r-g.$handlerArea.height()/2,m=g.$handlerArea.width(),p=g.$handlerArea.height();h<0?h=0:o-m<h&&(h=o-m),d<0?d=0:s-p<d&&(d=s-p),a=-h/g.scale,n=-d/g.scale,g.isWebkit?(g.$handlerArea.css({opacity:.99}),setTimeout(function(){g.$handlerArea.css({top:d,left:h,opacity:1})},0)):g.$handlerArea.css({top:d,left:h})}else"follow"==g.options.type&&(n=-g.$largeImg.height()/s*r+g.options.zoomSize[1]/2,a=-g.$largeImg.width()/o*l+g.options.zoomSize[0]/2,-n>g.$largeImg.height()-g.options.zoomSize[1]?n=-(g.$largeImg.height()-g.options.zoomSize[1]):0<n&&(n=0),-a>g.$largeImg.width()-g.options.zoomSize[0]?a=-(g.$largeImg.width()-g.options.zoomSize[0]):0<a&&(a=0));g.options.smoothMove?(c.clearTimeout(g.animateTimer),g.smoothMove(a,n)):g.$viewer.find("img").css({top:n,left:a})}}else g.isActive=!1,g.$viewer.hide(),g.$handler.hide(),g.options.onHide(g),c.clearTimeout(g.animateTimer),g.animateTimer=null},g.showViewer=function(t){var e=g.$el.offset().top,i=f(g.$el.css("borderTopWidth")),o=f(g.$el.css("paddingTop")),s=g.$el.offset().left,n=f(g.$el.css("borderLeftWidth")),a=f(g.$el.css("paddingLeft"));e=e+i+o,s=s+n+a;var r=g.$el.width(),l=g.$el.height();if(g.isBigImageReady<1&&p("div",g.$viewer).remove(),"inner"==g.options.type)g.$viewer.css({top:e,left:s,width:r,height:l}).show();else if("standard"==g.options.type){var h,d,m=""==g.options.alignTo?g.$el:p("#"+g.options.alignTo);if(c.innerWidth<768)"left"==g.options.position?(h=s+n+a,d=m.offset().top-m.height()/2):"right"==g.options.position&&(h=s+n+a,d=m.offset().top-m.height()),g.$viewer.css({top:d,left:h,width:m.width(),height:g.options.zoomSize[1]/2}).show(),g.$handlerArea&&(g.scale=r/g.$largeImg.width(),g.$handlerArea.css({width:g.$viewer.width()*g.scale,height:g.$viewer.height()*g.scale}));else{if("left"==g.options.position)d=(h=m.offset().left<m.width()/2?s+n+m.width()+m.offset().left:m.offset().left-g.options.zoomSize[0]-g.options.offset[0],m.offset().top+g.options.offset[1]);else if("right"==g.options.position){d=(h=c.innerWidth-(m.offset().left+m.width())<m.width()/2?m.offset().left-g.options.zoomSize[0]-g.options.offset[0]:m.offset().left+m.width()+g.options.offset[0],m.offset().top+g.options.offset[1])}g.$viewer.css({top:d,left:h,width:g.options.zoomSize[0],height:g.options.zoomSize[1]}).show(),g.$handlerArea&&(g.scale=r/g.$largeImg.width(),g.$handlerArea.css({width:g.$viewer.width()*g.scale,height:g.$viewer.height()*g.scale}))}}else"follow"==g.options.type&&g.$viewer.css({width:g.options.zoomSize[0],height:g.options.zoomSize[1],top:t.pageY-g.options.zoomSize[1]/2,left:t.pageX-g.options.zoomSize[0]/2}).show();g.$handler.css({top:e,left:s,width:r,height:l}).show(),g.options.onShow(g),-1==g.isBigImageReady&&(g.isBigImageReady=0,fastImg(g.options.bigImageSrc,function(){if(p.trim(p(this).attr("src"))==p.trim(g.options.bigImageSrc)){if(g.$viewer.append('<img src="'+g.$el.attr("src")+'" class="zm-fast" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),g.isBigImageReady=1,g.$largeImg=p('<img src="'+g.options.bigImageSrc+'" style="position:absolute;width:'+this.width+"px;height:"+this.height+'px">'),g.$viewer.append(g.$largeImg),"standard"==g.options.type){var e=r/this.width;g.$handlerArea=p('<div class="zm-handlerarea" style="width:'+g.$viewer.width()*e+"px;height:"+g.$viewer.height()*e+'px"></div>').appendTo(g.$handler),g.scale=e}-1==g.evt.x&&-1==g.evt.y?g.moveHandler(t.pageX,t.pageY):g.moveHandler(g.evt.x,g.evt.y),g.options.showDescription&&g.$el.attr("alt")&&""!=p.trim(g.$el.attr("alt"))&&g.$viewer.append('<div class="'+g.options.descriptionClass+'">'+g.$el.attr("alt")+"</div>")}},function(){},function(){}))},g.changeImage=function(e,t){this.$el.attr("src",e),this.isBigImageReady=-1,this.options.bigImageSrc="string"==typeof t?t:e,g.options.preload&&((new Image).src=this.options.bigImageSrc),this.$viewer.hide().empty(),this.$handler.hide().empty(),this.$handlerArea=null},g.changeZoomSize=function(e,t){g.options.zoomSize=[e,t]},g.destroy=function(){p(document).unbind("mousemove.imagezoom"+g.callIndex),this.$el.unbind(".imagezoom"),this.$viewer.remove(),this.$handler.remove(),this.$el.removeData("imagezoom")},g.smoothMove=function(e,t){var i=parseInt(g.$largeImg.css("top"));i=isNaN(i)?0:i;var o=parseInt(g.$largeImg.css("left"));if(o=isNaN(o)?0:o,t=parseInt(t),e=parseInt(e),i==t&&o==e)return c.clearTimeout(g.animateTimer),void(g.animateTimer=null);var s=t-i,n=e-o,a=i+s/Math.abs(s)*Math.ceil(Math.abs(s/10)),r=o+n/Math.abs(n)*Math.ceil(Math.abs(n/10));g.$viewer.find("img").css({top:a,left:r}),g.animateTimer=setTimeout(function(){g.smoothMove(e,t)},10)},g.init(t)},p.ImageZoom.defaults={bigImageSrc:"",preload:!0,type:"inner",smoothMove:!0,position:"right",offset:[10,0],alignTo:"",zoomSize:[100,100],descriptionClass:"zm-description",zoomViewerClass:"",zoomHandlerClass:"",showDescription:!0,onShow:function(e){},onHide:function(e){}},p.ImageZoom._calltimes=0,p.fn.ImageZoom=function(e){return this.each(function(){new p.ImageZoom(this,e)})}}(jQuery,window);var fastImg=function(){var d=[],m=null,p=function(){for(var e=0;e<d.length;e++)d[e].end?d.splice(e--,1):d[e]();!d.length&&t()},t=function(){clearInterval(m),m=null};return function(e,t,i,o){var s,n,a,r,l,h=new Image;if(h.src=e,h.complete)return t.call(h),void(i&&i.call(h));n=h.width,a=h.height,h.onerror=function(){o&&o.call(h),s.end=!0,h=h.onload=h.onerror=null},(s=function(){r=h.width,l=h.height,(r!==n||l!==a||1024<r*l)&&(t.call(h),s.end=!0)})(),h.onload=function(){!s.end&&s(),i&&i.call(h),h=h.onload=h.onerror=null},s.end||(d.push(s),null===m&&(m=setInterval(p,40)))}}();